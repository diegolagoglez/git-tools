#!/bin/bash

function usage {
	echo "Usage: $(basename $0) [base dir]"
}

base_dir="."

if [ -d "$1" ]; then
	base_dir="$1"
fi

for dir in $(find $base_dir -maxdepth 1 -type d); do
	if [ "$dir" != "." -a "$dir" != ".." ]; then
		git -C $dir rev-parse --git-dir >/dev/null 2>&1 && [[ "$(git -C $dir remote)" != "" ]] && echo -n "  GIT PULL $(printf %-25s $(basename $dir)) " && git -C $dir pull --rebase
	fi
done
