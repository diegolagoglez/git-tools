#!/bin/bash


function git_get_var() {
	git config --global $1
}

function write_config() {
	for v in ${var_names[@]}; do
		echo "git config --global $v '${vars[$v]}'"
		if [ $? != 0 ]; then
			echo "ERROR: Cannot set Git configuration." 1>&2
			exit 1
		fi
	done
}

var_names=(user.name user.email)

declare -A vars

for v in ${var_names[@]}; do
	vars[$v]=$(git_get_var $v)
done

for v in ${var_names[@]}; do
	echo "$v = ${vars[$v]}"
done

echo
read -p "Are you sure you want to write Git configuration? [yes/no] "

if [ "$REPLY" == "yes" ]; then
	echo
	write_config
fi