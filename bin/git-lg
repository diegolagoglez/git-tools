#!/bin/bash

count=$(git rev-list HEAD --count)
limit=25

if [ -n "$GIT_LOG_LIMIT" ]; then
	limit=$GIT_LOG_LIMIT
fi

if [ -n "$1" ]; then
	regex='^[0-9]+$'
	if [[ "$1" =~ $regex ]]; then
		limit=$1
		shift
	fi
fi

git log --graph --pretty="%Cred%h %Cgreen%ad %Cblue%an%Creset %s%C(yellow)%d" --date='format:%F %T' -n $limit $*

if [ $count -gt $limit ]; then
	echo "[ *** Showing only the last $limit log lines of $count total log lines *** ]"
fi
